C51 COMPILER V9.59.0.0   MAIN                                                              10/27/2019 17:59:07 PAGE 1   


C51 COMPILER V9.59.0.0, COMPILATION OF MODULE MAIN
OBJECT MODULE PLACED IN .\Objects\main.obj
COMPILER INVOKED BY: C:\Keil_v5\C51\BIN\C51.EXE main.c OPTIMIZE(8,SPEED) BROWSE INCDIR(.\SRC) DEBUG OBJECTEXTEND PRINT(.
                    -\Listings\main.lst) OBJECT(.\Objects\main.obj)

line level    source

   1          #include "reg51.h"
   2          #include "intrins.h"
   3          #include "config.h"
   4          #include "servo.h"
   5          #include "oled.h"
   6          #include "bmp.h"
   7          #include "echo.h"
   8          #include "ds18b20.h"
   9          #include "stdio.h"
  10          
  11          void mDelay(unsigned int i)
  12          {
  13   1              while(i--);
  14   1      }
  15          void showInit()
  16          {
  17   1              unsigned char offset_x=0;
  18   1              offset_x=20;
  19   1              OLED_ShowCHinese(offset_x+0,0,0);//智
  20   1              OLED_ShowCHinese(offset_x+18,0,1);//能
  21   1              OLED_ShowCHinese(offset_x+36,0,2);//垃
  22   1              OLED_ShowCHinese(offset_x+54,0,3);//圾
  23   1              OLED_ShowCHinese(offset_x+72,0,4);//桶
  24   1      
  25   1              OLED_ShowCHinese(0,2,5);//温
  26   1              OLED_ShowCHinese(18,2,6);//度
  27   1              
  28   1              OLED_ShowCHinese(0,4,7);//容
  29   1              OLED_ShowCHinese(18,4,8);//量
  30   1              
  31   1              OLED_ShowCHinese(0,6,5);//温
  32   1              OLED_ShowCHinese(18,6,9);//阈
  33   1      }
  34          
  35          void main()
  36          {
  37   1              unsigned char tempStr[5];
  38   1              float temp=0;
  39   1              static unsigned int tempE=30;
  40   1              unsigned int closeMinTime=0;
  41   1              P0M0=0x40;
  42   1              P0M1=0x40;
  43   1              
  44   1              servoInit();
  45   1              OLED_Init();//初始化OLED  
  46   1              OLED_Clear(); 
  47   1              showInit();
  48   1              
  49   1          while (1)
  50   1              {       
  51   2                      
  52   2                      temp=(float)Get_Tmp()/10;
  53   2                      if(temp>=(float)tempE){
  54   3                              BEEP=0;
C51 COMPILER V9.59.0.0   MAIN                                                              10/27/2019 17:59:07 PAGE 2   

  55   3                      }else{
  56   3                              BEEP=1;
  57   3                      }
  58   2                      
  59   2                      sprintf(tempStr,"%5f",temp);
  60   2                      tempStr[4]='\0';
  61   2                      OLED_ShowNum(36,4,getEcho(),3,16);       //显示超声波
  62   2                      OLED_ShowString(36,2,tempStr,16);        //显示温度
  63   2                      OLED_ShowNum(36,6,tempE,3,16);   //显示温度阈值
  64   2                      if(KEY_UP==0)
  65   2                      {
  66   3                              mDelay(60000);
  67   3                              if(KEY_UP==0)
  68   3                                      tempE++;
  69   3                      }
  70   2                      else if(KEY_DWON==0)
  71   2                      {
  72   3                              mDelay(60000);
  73   3                              if(KEY_DWON==0)
  74   3                                      tempE--;
  75   3                      }
  76   2                      
  77   2                      if(RED==0)//
  78   2                      {
  79   3                              closeMinTime++;
  80   3                              if(closeMinTime>=60){
  81   4                                      
  82   4                                      servoTurn();
  83   4                              }
  84   3                              LED=1;
  85   3                      }
  86   2                      else if(RED==1)//有人来了
  87   2                      {
  88   3                              closeMinTime=0;
  89   3      
  90   3                              servoReturn();
  91   3                              LED=0;
  92   3                      }
  93   2              }
  94   1      }
  95          


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    390    ----
   CONSTANT SIZE    =   2052    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =      2      12
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
